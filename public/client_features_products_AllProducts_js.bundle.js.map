{"version":3,"file":"client_features_products_AllProducts_js.bundle.js","mappings":"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","sources":["webpack://graceshopper/./client/features/products/AllProducts.js","webpack://graceshopper/./node_modules/uuid/dist/esm-browser/regex.js","webpack://graceshopper/./node_modules/uuid/dist/esm-browser/rng.js","webpack://graceshopper/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://graceshopper/./node_modules/uuid/dist/esm-browser/v4.js","webpack://graceshopper/./node_modules/uuid/dist/esm-browser/validate.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { fetchProductsAsync, selectAllProducts } from './AllProductsSlice';\nimport { addOrder } from '../dataSlice';\nimport { Link } from 'react-router-dom';\nimport { v4 as uuidv4 } from 'uuid';\n\nconst AllProducts = () => {\n  const dispatch = useDispatch();\n  const { products, status, error } = useSelector(selectAllProducts);\n  const username = useSelector((state) => state.auth.me.username);\n  const isLoggedIn = useSelector((state) => !!state.auth.me.id);\n  const userId = useSelector((state) => state.auth.me.id);\n\n  useEffect(() => {\n    dispatch(fetchProductsAsync());\n  }, [dispatch]);\n\n  if (status === 'loading') {\n    return <div>Loading...</div>;\n  }\n\n  if (status === 'failed') {\n    return <div>{error}</div>;\n  }\n\n  if (products.length === 0) {\n    return <div>No products found</div>;\n  }\n\n  const handleAddToCart = (id, name, price, userId) => {\n    if (isLoggedIn) {\n      const product = { id, name, price };\n      fetch('/api/orders', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          userId,\n          product: JSON.stringify(product),\n          quantity: 1,\n          id: uuidv4()\n        })\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          dispatch(addOrder(data));\n        })\n        .catch((error) => console.error(error));\n    } else {\n      const order = { id: uuidv4(), productName: name, productPrice: price, quantity: 1 };\n      const existingOrders = JSON.parse(localStorage.getItem('orders')) || [];\n      localStorage.setItem('orders', JSON.stringify([...existingOrders, order]));\n    }\n  };\n\n  return (\n    <div>\n      <h1>{username ? `Shopping as:  ${username}` : \"Viewing as Guest\"}</h1>\n      <h1>All Products</h1>\n      {products.map((product) => (\n        <div key={product.id}>\n          <Link to={`/vans/${product.id}`}>\n            <h2>{product.name}</h2>\n            <img src={product.imageUrl} alt={product.name} className=\"productImg\" />\n            <p>Price: ${product.price}</p>\n          </Link>\n          {isLoggedIn && (\n            <button onClick={() => handleAddToCart(product.id, product.name, product.price, userId)}>\n              Add to Cart\n            </button>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default AllProducts;\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;"],"names":["React","useEffect","useSelector","useDispatch","fetchProductsAsync","selectAllProducts","addOrder","Link","v4","uuidv4","AllProducts","dispatch","_useSelector","products","status","error","username","state","auth","me","isLoggedIn","id","userId","createElement","length","handleAddToCart","name","price","product","fetch","method","headers","body","JSON","stringify","quantity","then","response","json","data","console","order","productName","productPrice","existingOrders","parse","localStorage","getItem","setItem","concat","_toConsumableArray","map","key","to","src","imageUrl","alt","className","onClick"],"sourceRoot":""}