{"version":3,"file":"client_features_products_SingleProduct_js.bundle.js","mappings":"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","sources":["webpack://graceshopper/./client/features/products/SingleProduct.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchSingleProduct, selectSingleProduct } from './SingleProductSlice';\nimport { useParams } from 'react-router-dom';\nimport { addOrder } from '../dataSlice';\n\nconst SingleProduct = () => {\n  const dispatch = useDispatch();\n  const { id } = useParams();\n  const product = useSelector(selectSingleProduct);\n\n  const isLoggedIn = useSelector((state) => !!state.auth.me.id);\n  const userId = useSelector((state) => state.auth.me.id);\n\n  const handleAddToCart = (id, name, price, userId, imageUrl) => {\n    if (isLoggedIn) {\n      const product = { id, name, price, imageUrl };\n      fetch('/api/orders', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          userId,\n          product: JSON.stringify(product),\n          quantity: 1\n        })\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          dispatch(addOrder(data));\n        })\n        .catch((error) => console.error(error));\n    } else {\n      const order = { productName: name, productPrice: price, quantity: 1 };\n      const existingOrders = JSON.parse(localStorage.getItem('orders')) || [];\n      localStorage.setItem('orders', JSON.stringify([...existingOrders, order]));\n    }\n  };\n\n  useEffect(() => {\n    dispatch(fetchSingleProduct(id));\n  }, [dispatch, id]);\n\n  return (\n    <div>\n      {product && (\n        <>\n          <h3>{product.name}</h3>\n          <img src={product.imageUrl} alt={product.name}  />\n          <p>{product.description}</p>\n          <p>${product.price}</p>\n          {isLoggedIn && (\n            <button onClick={() => handleAddToCart(product.id, product.name, product.price, userId, product.imageUrl)}>\n  Add to Cart\n</button>\n\n          )}        </>\n      )}\n    </div>\n  );\n}\n\nexport default SingleProduct;\n\n"],"names":["React","useEffect","useState","useDispatch","useSelector","fetchSingleProduct","selectSingleProduct","useParams","addOrder","SingleProduct","dispatch","_useParams","id","product","isLoggedIn","state","auth","me","userId","handleAddToCart","name","price","imageUrl","fetch","method","headers","body","JSON","stringify","quantity","then","response","json","data","error","console","order","productName","productPrice","existingOrders","parse","localStorage","getItem","setItem","concat","_toConsumableArray","createElement","Fragment","src","alt","description","onClick"],"sourceRoot":""}